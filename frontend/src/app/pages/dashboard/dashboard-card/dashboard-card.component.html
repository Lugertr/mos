<mat-card *ngIf="doc() as d" class="doc-card" aria-label="Document card">
  <mat-card-header>
    <div mat-card-avatar class="avatar">
      <mat-icon>description</mat-icon>
    </div>
    <mat-card-title class="title">{{ d.title }}</mat-card-title>
    <mat-card-subtitle class="subtitle">ID: {{ d.doc_id }}</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <div class="row"><span class="label">Автор:</span><span class="value">{{ d.author ?? '-' }}</span></div>
    <div class="row"><span class="label">Тип (ID):</span><span class="value">{{ d.type_id ?? '-' }}</span></div>
    <div class="row"><span class="label">Дата документа:</span><span class="value">{{ formatDate(d.document_date) }}</span></div>
    <div class="row"><span class="label">Создано:</span><span class="value">{{ formatDate(d.created_at) }}</span></div>
    <div class="row">
      <span class="label">Видимость:</span>
      <span class="value">{{ privacyLabel(d.privacy) }}</span>
    </div>
  </mat-card-content>

  <mat-card-actions class="actions">
    <!-- change visibility -->
    <button
      mat-icon-button
      (click)="onTogglePrivacy()"
      [attr.aria-label]="'Toggle visibility for ' + d.title"
      matTooltip="Изменить видимость"
    >
      <mat-icon>{{ d.privacy === 'public' ? 'visibility' : 'visibility_off' }}</mat-icon>
    </button>

    <!-- edit -->
    <button
      mat-icon-button
      color="primary"
      (click)="onEdit()"
      [disabled]="!d.can_requester_edit"
      matTooltip="{{ d.can_requester_edit ? 'Редактировать' : 'Недоступно' }}"
      [attr.aria-disabled]="!d.can_requester_edit"
    >
      <mat-icon>edit</mat-icon>
    </button>

    <!-- delete -->
    <button
      mat-icon-button
      color="warn"
      (click)="onRemove()"
      [disabled]="!d.can_requester_edit"
      matTooltip="{{ d.can_requester_edit ? 'Удалить' : 'Недоступно' }}"
      [attr.aria-disabled]="!d.can_requester_edit"
    >
      <mat-icon>delete</mat-icon>
    </button>
  </mat-card-actions>
</mat-card>
